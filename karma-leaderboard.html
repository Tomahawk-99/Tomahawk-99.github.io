<!DOCTYPE html>
<html>
  <head>
	  <title>[CLWO] TTT Dashboard</title>
	<!--Import Google Icon Font-->
	<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
	<link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
	<link type="text/css" rel="stylesheet" href="css/main.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>

  <body>

    <!--Navbar-->
    <div class="navbar-fixed">
        <nav>
            <div class="nav-wrapper">
				<a href="#" data-target="mobile-demo" class="sidenav-trigger right show-on-large"><i class="material-icons burger">menu</i></a>
				<a href="#" data-target="mobile-demo" class="sidenav-trigger"><span class="logo">CLWO.EU</span></a>
              	<ul id="nav-mobile" class="left hide-on-med-and-down">
					<li><a href="https://clwo.eu/" class="logo"><span class="logo-span">CLWO.EU</span></a></li>
					<li><a href="index.html"><i class="material-icons left">dashboard</i><span>QUICK DASH</span></a></li>
					<li><a href="player-profile.html"><i class="material-icons left">account_box</i><span>player profile</span></a></li>
                	<li><a href="karma-leaderboard.html"><i class="material-icons left">grade</i><span>KARMA LEADERBOARD</span></a></li>
					<li><a href="shop-stats.html"><i class="material-icons left">shopping_cart</i><span>SHOP STATS</span></a></li>
                	<li><a href="https://staff.aimless.eu/cases/"><i class="material-icons left">trending_up</i><span>RDM CASE TRACKER</span></a></li>
					<li><a href="https://clwo.eu/forum-38.html"><i class="material-icons left">forum</i><span>TTT FORUMS</span=></a></li>
					<li><a href="https://clwo.eu/ttt/sourcebans/"><i class="material-icons left">gavel</i><span>TTT bans</span=></a></li>
              	</ul>
            </div>
          </nav>
	</div>
	
	<!--Sidebar-->
	<div class="sidebar">
		<ul class="sidenav" id="mobile-demo">
			<li><a href="index.html"><i class="material-icons left">dashboard</i><span>QUICK DASH</span></a></li>
			<li><a href="player-profile.html"><i class="material-icons left">account_box</i><span>player profile</span></a></li>
			<li><a href="karma-leaderboard.html"><i class="material-icons left">grade</i><span>KARMA LEADERBOARD</span></a></li>
			<li><a href="shop-stats.html"><i class="material-icons left">shopping_cart</i><span>SHOP STATS</span></a></li>
			<li><a href="https://staff.aimless.eu/cases/"><i class="material-icons left">trending_up</i><span>RDM CASE TRACKER</span></a></li>
			<li><a href="https://clwo.eu/forum-38.html"><i class="material-icons left">forum</i><span>TTT FORUMS</span=></a></li>
			<li><a href="https://clwo.eu/ttt/sourcebans/"><i class="material-icons left">gavel</i><span>TTT bans</span=></a></li>
		  </ul>
	</div>

	<div class="container row" style="border: 1px solid rgba(160, 160, 160, 0.3); background-color: white; margin-bottom: 0 !important;">
		<div class="section col s12">
			<div class="panel-header" style="padding-left: 1em;">
				<h2 style="margin-top: 1rem;">From ritz to rubble</h2>
				<span class="card-subtitle">A total ranking of active player's karma</span>
			</div>
			<div class="divider"></div>
			<div class="row">
				<div class="card col s12 left">
					<div class="card-content center-align">
						<table id="karmaLeaderboard" class="highlight">
							<tbody id="karmaData"></tbody>
						</table>
					</div>
					<div class="card-action center-align" style="border-top: none;">
						<a class="btn-flat more_info" href="karma-leaderboard.html" style="padding-left: 1rem; margin: auto">
							Next page
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>

    <!--JavaScript at end of body for optimized loading-->
	<script type="text/javascript" src="js/materialize.min.js"></script>
	<script type="text/javascript" src="js/auto-init.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript">
		function Get(yourUrl){
			var Httpreq = new XMLHttpRequest(); // a new request
			Httpreq.open("GET",yourUrl,false);
			Httpreq.send(null);
			return Httpreq.responseText;          
		}

		var json_obj = JSON.parse(Get('https://clwo.eu/jailbreak/api/v2/ttt_karma.php?MaxPerPage=10'));
		var top_karma = json_obj.data;
	
		function topMonthKarmaTable(){
			const table = document.getElementById("karmaData");
			for(var i = 0; i < 10; i++) {
				var player = top_karma[i];
				let row = table.insertRow();
				let account = row.insertCell(0);
				var json_player= JSON.parse(Get('https://clwo.eu/jailbreak/api/v2/accounthelper.php?AccountID='+player.AccountID));
				var player_profile = json_player.SteamData;
				console.log();
				account.innerHTML = '<a href="'+player_profile.profileurl+'">'+player_profile.personaname+'</a>';
				let karma = row.insertCell(1);
				karma.innerHTML = player.Karma;
			}
		}

		topMonthKarmaTable();
		</script>
    </body>
  
</html>